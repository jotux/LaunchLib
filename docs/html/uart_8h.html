<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LaunchLib: uart.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">LaunchLib
   
   </div>
   <div id="projectbrief">An easy-to-use library to help kickstart your launchpad development.</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('uart_8h.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">uart.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Definitions, data structues and prototypes for UART.  
<a href="#details">More...</a></p>

<p><a href="uart_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_baud_rate_config.html">BaudRateConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup table for uart config parameters.  <a href="struct_baud_rate_config.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a361986379210db4bedbdf16eb780a8c0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#a361986379210db4bedbdf16eb780a8c0">NUMBER_BASE</a> { <a class="el" href="uart_8h.html#a361986379210db4bedbdf16eb780a8c0af08a543d5a1549321682e12569d0fbd6">DECIMAL</a>, 
<a class="el" href="uart_8h.html#a361986379210db4bedbdf16eb780a8c0ad3c20094c5fe3327350484d01c44c137">HEX</a>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a845320ee4b3a5233eef0ecc496803361"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#a845320ee4b3a5233eef0ecc496803361">UartInit</a> (<a class="el" href="global_8h.html#a33594304e786b158f3fb30289278f5af">uint32_t</a> baud_rate)</td></tr>
<tr class="memdesc:a845320ee4b3a5233eef0ecc496803361"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Uart hardware.  <a href="#a845320ee4b3a5233eef0ecc496803361"></a><br/></td></tr>
<tr class="memitem:a5d1403cfde04c92b8accf2a99daa850e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#a5d1403cfde04c92b8accf2a99daa850e">UartPrintf</a> (<a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *format,...)</td></tr>
<tr class="memdesc:a5d1403cfde04c92b8accf2a99daa850e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print string containing arbitrary number of arguments.  <a href="#a5d1403cfde04c92b8accf2a99daa850e"></a><br/></td></tr>
<tr class="memitem:a2f66e34777bf9859318aaeb076d3dcf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#a2f66e34777bf9859318aaeb076d3dcf9">UartRead</a> (<a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *in, <a class="el" href="global_8h.html#adf4d876453337156dde61095e1f20223">uint16_t</a> len)</td></tr>
<tr class="memdesc:a2f66e34777bf9859318aaeb076d3dcf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from the rx buffer and place it into the provided address.  <a href="#a2f66e34777bf9859318aaeb076d3dcf9"></a><br/></td></tr>
<tr class="memitem:ac73e0a24fb3a76b33f178608b1961cbc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#ac73e0a24fb3a76b33f178608b1961cbc">UartWrite</a> (<a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *in, <a class="el" href="global_8h.html#adf4d876453337156dde61095e1f20223">uint16_t</a> len)</td></tr>
<tr class="memdesc:ac73e0a24fb3a76b33f178608b1961cbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to the Uart for transmit from the provided address.  <a href="#ac73e0a24fb3a76b33f178608b1961cbc"></a><br/></td></tr>
<tr class="memitem:af40579990e2a31d25a57dc24f2f048dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#af40579990e2a31d25a57dc24f2f048dd">UartGetC</a> (void)</td></tr>
<tr class="memdesc:af40579990e2a31d25a57dc24f2f048dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single byte from the uart.  <a href="#af40579990e2a31d25a57dc24f2f048dd"></a><br/></td></tr>
<tr class="memitem:af7b647a92a39dbbc1e4db990a51d1b5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#af7b647a92a39dbbc1e4db990a51d1b5f">UartPutC</a> (<a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> data)</td></tr>
<tr class="memdesc:af7b647a92a39dbbc1e4db990a51d1b5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a single byte to the uart.  <a href="#af7b647a92a39dbbc1e4db990a51d1b5f"></a><br/></td></tr>
<tr class="memitem:ad49030c86f6964b5589c7248c7536917"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#ad49030c86f6964b5589c7248c7536917">UartPutS</a> (<a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *s)</td></tr>
<tr class="memdesc:ad49030c86f6964b5589c7248c7536917"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a string of bytes to the uart.  <a href="#ad49030c86f6964b5589c7248c7536917"></a><br/></td></tr>
<tr class="memitem:af6888b94959a921ae8ff29952df28462"><td class="memItemLeft" align="right" valign="top"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart_8h.html#af6888b94959a921ae8ff29952df28462">UartBufEmpty</a> (void)</td></tr>
<tr class="memdesc:af6888b94959a921ae8ff29952df28462"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check to see if rx buffer is empty.  <a href="#af6888b94959a921ae8ff29952df28462"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Definitions, data structues and prototypes for UART. </p>
<dl class="section author"><dt>Author:</dt><dd>Joe Brown </dd></dl>

<p>Definition in file <a class="el" href="uart_8h_source.html">uart.h</a>.</p>
</div><hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a361986379210db4bedbdf16eb780a8c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="uart_8h.html#a361986379210db4bedbdf16eb780a8c0">NUMBER_BASE</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a361986379210db4bedbdf16eb780a8c0af08a543d5a1549321682e12569d0fbd6"></a>DECIMAL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a361986379210db4bedbdf16eb780a8c0ad3c20094c5fe3327350484d01c44c137"></a>HEX</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="uart_8h_source.html#l00030">30</a> of file <a class="el" href="uart_8h_source.html">uart.h</a>.</p>
<div class="fragment"><pre class="fragment">{<a class="code" href="uart_8h.html#a361986379210db4bedbdf16eb780a8c0af08a543d5a1549321682e12569d0fbd6">DECIMAL</a>, <a class="code" href="uart_8h.html#a361986379210db4bedbdf16eb780a8c0ad3c20094c5fe3327350484d01c44c137">HEX</a>};
</pre></div>
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af6888b94959a921ae8ff29952df28462"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="uart_8h.html#af6888b94959a921ae8ff29952df28462">UartBufEmpty</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check to see if rx buffer is empty. </p>
<p>Check rx_size to see if any data is pending </p>
<dl class="section return"><dt>Returns:</dt><dd>1 if empty, 0 if not empty </dd></dl>

</div>
</div>
<a class="anchor" id="af40579990e2a31d25a57dc24f2f048dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="uart_8h.html#af40579990e2a31d25a57dc24f2f048dd">UartGetC</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a single byte from the uart. </p>
<p>If the uart is configured as non-blocking we will try to get one byte from the rx buffer. If we are configured as blocking we will wait for a character to be recieved. </p>
<dl class="section return"><dt>Returns:</dt><dd>single data from rx buffer </dd></dl>

<p>Definition at line <a class="el" href="uart_8c_source.html#l00506">506</a> of file <a class="el" href="uart_8c_source.html">uart.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef NON_BLOCKING_UART_RX</span>
<span class="preprocessor"></span>    <a class="code" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> buf = 0;
    <span class="keywordflow">while</span>(<a class="code" href="uart_8h.html#af6888b94959a921ae8ff29952df28462" title="Check to see if rx buffer is empty.">UartBufEmpty</a>());
    RxBufferDequeue(&amp;buf,1);
    <span class="keywordflow">return</span> buf;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">while</span> (!(UART_INT_FLAG &amp; UCA0RXIFG));    <span class="comment">// RX a byte?</span>
    <span class="keywordflow">return</span> UCA0RXBUF;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a845320ee4b3a5233eef0ecc496803361"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="uart_8h.html#a845320ee4b3a5233eef0ecc496803361">UartInit</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="global_8h.html#a33594304e786b158f3fb30289278f5af">uint32_t</a>&#160;</td>
          <td class="paramname"><em>baud_rate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize Uart hardware. </p>
<p>Use the lookup table to get baud rate information then configure the uart hardware for use. Depending on if blocking/non-blocking is selected different interrupts will also be configured. If you need more baud rate configurations you can look them up in the userguide. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">baud_rate</td><td>baud rate value (9600,19200,38400,57600,115200) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="uart_8c_source.html#l00067">67</a> of file <a class="el" href="uart_8c_source.html">uart.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> i = 0;
    <a class="code" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> index = 0;
    <span class="comment">// find where the baud rate is in the table</span>
    <span class="keywordflow">for</span>(i = 0;i &lt; <span class="keyword">sizeof</span>(rate_table) / <span class="keyword">sizeof</span>(<a class="code" href="struct_baud_rate_config.html" title="Lookup table for uart config parameters.">BaudRateConfig</a>);i++)
    {
        <span class="keywordflow">if</span> (baud_rate == rate_table[i].baud &amp;&amp;
            <a class="code" href="clock_8c.html#a359bc99c5de9e253ca290fdde403d7b0">g_clock_speed</a> == rate_table[i].clock)
        {
            index = i;
            <span class="keywordflow">break</span>;
        }
    }

    <span class="comment">// SMCLK sources uart</span>
    UCA0CTL1 |= UCSSEL_2;
    <span class="comment">// set the divisor</span>
    UCA0BR0 = rate_table[index].<a class="code" href="struct_baud_rate_config.html#afce1d95014fb4abe759cddcfcb500178">ucbr</a>;
    <span class="comment">// we always use modulation and never go below 9600 baud which means BR will</span>
    <span class="comment">// always be &lt; 256</span>
    UCA0BR1 = 0;
    <span class="comment">// UCBRS is at bits 1-3</span>
    UCA0MCTL = rate_table[index].<a class="code" href="struct_baud_rate_config.html#a4a4b8a2162a282ab9752f320f55d6aad">ucbrs</a> &lt;&lt; UCBRS_OFFSET;
    <span class="comment">// UCBRF is at bits 4-7</span>
    UCA0MCTL |= rate_table[index].<a class="code" href="struct_baud_rate_config.html#aff54dfd2b6114093aa50381b927b22a3">ucbrf</a> &lt;&lt; USBRF_OFFSET;
    <span class="comment">// set UCOS16 to enable oversampling</span>
    UCA0MCTL |= UCOS16;

    <span class="comment">// Initialize USCI state machine</span>
    UCA0CTL1 &amp;= ~UCSWRST;
    <span class="comment">// Enable USCI_A0 RX and TX interrupts</span>
<span class="preprocessor">#ifdef NON_BLOCKING_UART_TX</span>
<span class="preprocessor"></span>    UART_INT_ENABLE |= UCA0TXIE;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="preprocessor">#ifdef NON_BLOCKING_UART_RX</span>
<span class="preprocessor"></span>    UART_INT_ENABLE |= UCA0RXIE;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a5d1403cfde04c92b8accf2a99daa850e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="uart_8h.html#a5d1403cfde04c92b8accf2a99daa850e">UartPrintf</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Print string containing arbitrary number of arguments. </p>
<p>The format pointer points to a string with format specifiers that represent arguments passed into the function. Within the function we will parse the format string, detect format specifiers and eventually pass them to various putc functions that are configured to our uart hardware. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">format</td><td>String of arbirary length containing characters and format specifiers </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">...</td><td>a list of arguments correlating to the format specifiers </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="uart_8c_source.html#l00406">406</a> of file <a class="el" href="uart_8c_source.html">uart.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> current_char;
    <a class="code" href="global_8h.html#aa5ad9bec438b7cf669efb1ca064e79f5">int16_t</a> current_short_int;
    <a class="code" href="global_8h.html#adb828ef50c2dbb783109824e94cf6c47">int32_t</a> current_long_int;

    va_list arg_list;
    va_start(arg_list, format);
    <span class="keywordflow">while</span>(current_char = *format++)
    {
        <span class="keywordflow">if</span>(current_char == <span class="charliteral">&#39;%&#39;</span>)
        {
            <span class="keywordflow">switch</span>(current_char = *format++)
            {
                <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:   <span class="comment">// String</span>
                    <a class="code" href="uart_8c.html#ad49030c86f6964b5589c7248c7536917" title="Write a string of bytes to the uart.">UartPutS</a>(va_arg(arg_list, <a class="code" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>*));
                    <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:   <span class="comment">// Char</span>
                    <a class="code" href="uart_8c.html#af7b647a92a39dbbc1e4db990a51d1b5f" title="Write a single byte to the uart.">UartPutC</a>(va_arg(arg_list, <a class="code" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>));
                    <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:   <span class="comment">// 32 bit</span>
                    <span class="keywordflow">switch</span>(current_char = *format++)
                    {
                        <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:   <span class="comment">// 32 bit signed</span>
                        <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:   <span class="comment">// 32 bit signed</span>
                        <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>:   <span class="comment">// 32 bit unsigned</span>
                            current_long_int = va_arg(arg_list, <a class="code" href="global_8h.html#a33594304e786b158f3fb30289278f5af">uint32_t</a>);
                            <span class="comment">// if we&#39;re negative</span>
                            <span class="keywordflow">if</span>(current_char != <span class="charliteral">&#39;u&#39;</span> &amp;&amp; current_long_int &lt; 0)
                            {
                                <span class="comment">// add the negative sign</span>
                                <a class="code" href="uart_8c.html#af7b647a92a39dbbc1e4db990a51d1b5f" title="Write a single byte to the uart.">UartPutC</a>(<span class="charliteral">&#39;-&#39;</span>);
                                <span class="comment">// swap the value to positive to print</span>
                                current_long_int = -current_long_int;
                            }
                            <a class="code" href="uart_8c.html#a86ba3f4bf17f71004694a266847bf661" title="Convert int to string and transmit.">UartPutIToA</a>(current_long_int, <a class="code" href="uart_8h.html#a361986379210db4bedbdf16eb780a8c0af08a543d5a1549321682e12569d0fbd6">DECIMAL</a>);
                            <span class="keywordflow">break</span>;
                        <span class="keywordflow">default</span>:
                            <span class="keywordflow">goto</span> bad_fmt;
                    }
                    <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:   <span class="comment">// 16 bit signed</span>
                <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:   <span class="comment">// 16 bit signed</span>
                <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>:   <span class="comment">// 16 bit unsigned</span>
                    current_short_int = va_arg(arg_list, <a class="code" href="global_8h.html#adf4d876453337156dde61095e1f20223">uint16_t</a>);
                    <span class="comment">// if we&#39;re negative</span>
                    <span class="keywordflow">if</span>(current_char != <span class="charliteral">&#39;u&#39;</span> &amp;&amp; current_short_int &lt; 0)
                    {
                        <span class="comment">// add the negative sign</span>
                        <a class="code" href="uart_8c.html#af7b647a92a39dbbc1e4db990a51d1b5f" title="Write a single byte to the uart.">UartPutC</a>(<span class="charliteral">&#39;-&#39;</span>);
                        <span class="comment">// swap the value to positive to print</span>
                        current_short_int = -current_short_int;
                    }
                    <a class="code" href="uart_8c.html#a86ba3f4bf17f71004694a266847bf661" title="Convert int to string and transmit.">UartPutIToA</a>(current_short_int, <a class="code" href="uart_8h.html#a361986379210db4bedbdf16eb780a8c0af08a543d5a1549321682e12569d0fbd6">DECIMAL</a>);
                    <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:   <span class="comment">// 32 bit hex</span>
                    current_long_int = va_arg(arg_list, <a class="code" href="global_8h.html#a33594304e786b158f3fb30289278f5af">uint32_t</a>);
                    <a class="code" href="uart_8c.html#a86ba3f4bf17f71004694a266847bf661" title="Convert int to string and transmit.">UartPutIToA</a>(current_long_int, <a class="code" href="uart_8h.html#a361986379210db4bedbdf16eb780a8c0ad3c20094c5fe3327350484d01c44c137">HEX</a>);
                    <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> 0:
                    <span class="keywordflow">return</span>;
                <span class="keywordflow">default</span>:
                    <span class="keywordflow">goto</span> bad_fmt;
            }
        }
        <span class="keywordflow">else</span>
        {
bad_fmt:
            <a class="code" href="uart_8c.html#af7b647a92a39dbbc1e4db990a51d1b5f" title="Write a single byte to the uart.">UartPutC</a>(current_char);
        }
    }
    va_end(arg_list);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af7b647a92a39dbbc1e4db990a51d1b5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="uart_8h.html#af7b647a92a39dbbc1e4db990a51d1b5f">UartPutC</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a single byte to the uart. </p>
<p>If the uart is configured as non-blocking we will enqueue one byte to the tx buffer. If we are configured as blocking we will stuff the data and wait for the transmit to complete </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>data to transmit </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="uart_8c_source.html#l00521">521</a> of file <a class="el" href="uart_8c_source.html">uart.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef NON_BLOCKING_UART_TX</span>
<span class="preprocessor"></span>    TxBufferEnqueue(data);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">while</span> (!(UART_INT_FLAG &amp; UCA0TXIFG));    <span class="comment">// TX buffer ready?</span>
    UCA0TXBUF = data;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="ad49030c86f6964b5589c7248c7536917"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="uart_8h.html#ad49030c86f6964b5589c7248c7536917">UartPutS</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a string of bytes to the uart. </p>
<p>Performs successive calls to UartGetC until no more data is left </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>data to transmit </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="uart_8c_source.html#l00532">532</a> of file <a class="el" href="uart_8c_source.html">uart.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">while</span>(*s)
    {
        <a class="code" href="uart_8c.html#af7b647a92a39dbbc1e4db990a51d1b5f" title="Write a single byte to the uart.">UartPutC</a>(*s++);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2f66e34777bf9859318aaeb076d3dcf9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="uart_8h.html#a2f66e34777bf9859318aaeb076d3dcf9">UartRead</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="global_8h.html#adf4d876453337156dde61095e1f20223">uint16_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read data from the rx buffer and place it into the provided address. </p>
<p>Dequeue data from the rx buffer and then adjust the start/size values. If the uart is configured as blocking this function will return 1 byte at a time. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">in</td><td>pointer to copy data to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of data to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>length of data copied to the in pointer </dd></dl>

<p>Definition at line <a class="el" href="uart_8c_source.html#l00481">481</a> of file <a class="el" href="uart_8c_source.html">uart.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef NON_BLOCKING_UART_RX</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> RxBufferDequeue(in, len);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    in[0] = <a class="code" href="uart_8c.html#af40579990e2a31d25a57dc24f2f048dd" title="Read a single byte from the uart.">UartGetC</a>();
    <span class="keywordflow">return</span> (1);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="ac73e0a24fb3a76b33f178608b1961cbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="uart_8h.html#ac73e0a24fb3a76b33f178608b1961cbc">UartWrite</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="global_8h.html#adf4d876453337156dde61095e1f20223">uint16_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write data to the Uart for transmit from the provided address. </p>
<p>If the uart is configured as non-blocking we will Enqueue data in a circular buffer for eventual transmit. If we are configured as blocking we will immediately transmit each character. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">in</td><td>pointer to copy data from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of data to write </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="uart_8c_source.html#l00492">492</a> of file <a class="el" href="uart_8c_source.html">uart.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="global_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> i = 0;
    <span class="keywordflow">for</span>(i = 0;i &lt; len;i++)
    {
<span class="preprocessor">#ifdef NON_BLOCKING_UART_TX</span>
<span class="preprocessor"></span>        TxBufferEnqueue(in[i]);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>        <a class="code" href="uart_8c.html#af7b647a92a39dbbc1e4db990a51d1b5f" title="Write a single byte to the uart.">UartPutC</a>(in[i]);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    }
}
</pre></div>
</div>
</div>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="uart_8h.html">uart.h</a>      </li>

    <li class="footer">Generated on Wed Apr 11 2012 23:43:45 for LaunchLib by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
